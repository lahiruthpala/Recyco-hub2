<?php $this->view('include/head') ?>
<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header is-small-screen">
    <?php $this->view('include/header') ?>
        <main class="mdl-layout__content">

            <div class="mdl-grid mdl-grid--no-spacing dashboard">

                <div
                    class="mdl-grid mdl-cell mdl-cell--9-col-desktop mdl-cell--12-col-tablet mdl-cell--4-col-phone mdl-cell--top">

                    <div class="mdl-cell mdl-cell--4-col-desktop mdl-cell--4-col-tablet mdl-cell--2-col-phone">
                        <div class="mdl-card mdl-shadow--2dp tile-card">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text"></h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                <div class="tile-content" style="position: relative;">
                                    <div class="tile-image">
                                        <img src="<?=ROOT?>/images/inventory.png" alt="Image" style="width: 200px; height: 200px;" />
                                    </div>
                                    <div class="tile-button" style="position: absolute; bottom: 0; right: 0;">
                                        <a href="<?= ROOT ?>/collector/inventory/" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green">Update Inventory Status</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                 
                    
                    
                    <div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--12-col-tablet mdl-cell--4-col-phone">
                        <div class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-layout__header-row">
                                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                                    style="border-radius: 99px; margin-left: 1VW;" onclick="showTable('assignedTable', 'Assigned Pickups')">Assigned Pickups</button>
                                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                                    style="border-radius: 99px; margin-left: 1VW;" onclick="showTable('completedTable', 'Completed Pickups')">Completed Pickups</button>
                                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                                    style="border-radius: 99px; margin-left: 1VW;" onclick="showTable('rejectedTable', 'Rejected Pickups')">Rejected Pickups</button>
                                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green"
                                    style="border-radius: 99px; margin-left: 1VW;" onclick="showTable('acceptedtedTable', 'Acceptedted Pickups')">Accepted Pickups</button>    
                            </div>
                          
                            <div class="mdl-card__supporting-text no-padding">
                                <table class="mdl-data-table mdl-js-data-table" id="assignedTable" style="width: 100%; table-layout: fixed;">
                                    <thead>
                                        <tr>
                                            <th class="mdl-data-table__cell--non-numeric">Pickup ID</th>
                                            <th class="mdl-data-table__cell--non-numeric">Assigned Date</th>
                                            <th class="mdl-data-table__cell--non-numeric">Status</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                    <?php
            if (is_array($rows) && !empty($rows)) {
                foreach ($rows as $row) {
                    ?>
                    <tr>
                        <td class="mdl-data-table__cell--non-numeric">
                            <?= $row->pickupId?? '' ?>
                        </td>
                        <td class="mdl-data-table__cell--non-numeric">
                            <?= $row->AssignedDate?? '' ?>
                        </td>
                      
                        <td class="mdl-data-table__cell--non-numeric">
                <?php
                $statusClass = ''; // Default class
                if ($row->Status == 'Accepted') {
                    $statusClass = 'color--light-blue'; // Set class for Accepted status
                } elseif ($row->Status == 'Completed') {
                    $statusClass = 'color--green'; // Set class for Completed status
                } elseif ($row->Status == 'Rejected') {
                    $statusClass = 'color--red'; // Set class for Rejected status
                }

                ?>
                <span class="label label--mini <?= $statusClass ?>"><?= $row->Status ?? '' ?></span>
            </td>
                      
                      

                        <td class="mdl-data-table__cell--non-numeric">
                            <form action="<?= ROOT ?>/collector/details/<?= $row->pickupId?? '' ?>" method="POST">
                                <!-- Replace 'your_id_value' with the actual ID -->
                                <input type="hidden" name="id" value="<?= $row->Partner_ID ?? '' ?>">
                                <button type="submit"
                                    class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-teal"
                                    style="border-radius: 99px;">View</button>
                            </form>

                        </td>
             <td class="mdl-data-table__cell--non-numeric">
                <?php
              
              if ($row->Status == 'Accepted') {
                ?>
                    <form action="<?= ROOT ?>/collector/jobs/<?= $row->pickupId ?? '' ?>/Complet" method="POST">
   
                    <input type="hidden" name="id" value="<?= $row->Partner_ID ?? '' ?>">

  
                    <input type="hidden" name="completion_date" value="<?= date('Y-m-d H:i:s') ?>">
    

                     <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-green" style="border-radius: 99px;">Completed</button>
                    </form>

                <?php
                }
                ?>
            </td>
                    </tr>
                    <?php
                }
            } else {
                // If $rows is not an array or is empty
                echo "No data available.";
            }
            ?>
                                                    
                                       
                                    </tbody>
                                </table>
                                <table class="mdl-data-table mdl-js-data-table" id="completedTable" style="width: 100%; table-layout: fixed; display: none;">
                                    <thead>
                                        <tr>
                                            <th class="mdl-data-table__cell--non-numeric">#</th>
                                            <th class="mdl-data-table__cell--non-numeric">Pickup ID</th>
                                            <th class="mdl-data-table__cell--non-numeric">Completed Date</th>
                                            <th class="mdl-data-table__cell--non-numeric">Status</th>
                                            <th class="mdl-data-table__cell--non-numeric">Reviews</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric">1</td>
                                            <td class="mdl-data-table__cell--non-numeric">P1235</td>
                                            <td class="mdl-data-table__cell--non-numeric">2023/09/28</td>
                                            <td class="mdl-data-table__cell--non-numeric"><span
                                                class="label label--mini color--green">Completed</span> </td>
                                            <td class="mdl-data-table__cell--non-numeric yellow-stars">&#9733;&#9733;&#9733;&#9733;</td>
                                          
                                        </tr>
                                      
                                    </tbody>
                                </table>
                                <table class="mdl-data-table mdl-js-data-table" id="acceptedtedTable" style="width: 100%; table-layout: fixed; display: none;">
                                <thead>
                                    <tr>
                                        <th class="mdl-data-table__cell--non-numeric">#</th>
                                        <th class="mdl-data-table__cell--non-numeric">Pickup ID</th>
                                        <th class="mdl-data-table__cell--non-numeric">Assigned Date</th>
                                        <th class="mdl-data-table__cell--non-numeric">Status</th>
                                       
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="mdl-data-table__cell--non-numeric">1</td>
                                            <td class="mdl-data-table__cell--non-numeric">P1235</td>
                                            <td class="mdl-data-table__cell--non-numeric">2023/09/28</td>
                                           
                                            <td class="mdl-data-table__cell--non-numeric"><span
                                                    class="label label--mini color--light-blue">Accepted</span> </td>
                                                    <td class="mdl-data-table__cell--non-numeric"><button
                                                        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-teal">completed</button>
                                                </td> 
                                    </tr>
                                </tbody>
                            </table>
                            <table class="mdl-data-table mdl-js-data-table" id="rejectedTable" style="width: 100%; table-layout: fixed; display: none;">
                                <thead>
                                    <tr>
                                        <th class="mdl-data-table__cell--non-numeric">#</th>
                                        <th class="mdl-data-table__cell--non-numeric">Pickup ID</th>
                                        <th class="mdl-data-table__cell--non-numeric">Assigned Date</th>
                                        <th class="mdl-data-table__cell--non-numeric">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="mdl-data-table__cell--non-numeric">1</td>
                                        <td class="mdl-data-table__cell--non-numeric">P1237</td>
                                        <td class="mdl-data-table__cell--non-numeric">2023/09/28</td>
                                        <td class="mdl-data-table__cell--non-numeric"><span
                                            class="label label--mini color--red">Rejected</span> </td>
                                    </tr>
                                </tbody>
                            </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>

    </div>
    <script>
        function showTable(tableId, buttonTitle) {
           
            document.getElementById('assignedTable').style.display = 'none';
            document.getElementById('completedTable').style.display = 'none';
            document.getElementById('rejectedTable').style.display = 'none';
            document.getElementById('acceptedtedTable').style.display = 'none';
    
            
            document.getElementById(tableId).style.display = 'table';
    
           
           
        }
        showTable('assignedTable');
    </script>
<?php $this->view('include/footer') ?>